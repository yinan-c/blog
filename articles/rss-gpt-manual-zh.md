# RSS-GPT ä½¿ç”¨æŒ‡å—

## é¡¹ç›®åœ°å€ä»¥åŠåŠŸèƒ½ä»‹ç»

- [yinan-c/RSS-GPT](https://github.com/yinan-c/RSS-GPT)
- [RSS-GPTä»‹ç»](https://yinan-c.github.io/rss-gpt.html)
- [English manual](https://yinan-c.github.io/rss-gpt-manual-en.html)

## éœ€è¦å‡†å¤‡çš„ä¸œè¥¿

- GitHub è´¦å·
- OpenAI API Key ï¼ˆå¯ä»¥åœ¨[è¿™é‡Œ](https://platform.openai.com/account/api-keys)å»ºç«‹è´¦å·ç”³è¯·ï¼‰

## 1 GitHub Actions éƒ¨ç½²

å¤§è‡´åŸç†æ˜¯ä½¿ç”¨ GitHub Actions å®šæ—¶è¿è¡Œ Python è„šæœ¬, è„šæœ¬è°ƒç”¨ OpenAI API ç”Ÿæˆæ€»ç»“é™„åœ¨ RSS åŸæ–‡ä¹‹å‰, ç„¶åç”Ÿæˆä¸€ä¸ªæ–°çš„ xml æ–‡ä»¶, ç„¶åæŠŠæ–‡ä»¶ commit åˆ°ä»“åº“ä¸­ rss/ æ–‡ä»¶å¤¹å†…, æ–‡ä»¶å¤¹å†…æ‰€æœ‰å†…å®¹éƒ½é€šè¿‡ Github Actions éƒ¨ç½²åœ¨ GitHub Pages ä¸Š, è¿™æ ·å°±å¯ä»¥é€šè¿‡ä½ çš„ GitHub pages åœ°å€è®¿é—®åˆ°è¿™ä¸ª xml æ–‡ä»¶, å¯ä»¥åœ¨ä»»ä½•æ”¯æŒ RSS çš„é˜…è¯»å™¨ä¸­è®¢é˜…ä½ è‡ªå·±ç”Ÿæˆçš„ feedsã€‚

å¦‚æœä½ ä¸æƒ³éƒ¨ç½²åœ¨ GitHub Pages, åº”è¯¥ä¹Ÿå¯ä»¥é€šè¿‡ç›´æ¥è®¿é—®ä»“åº“ä¸­çš„ xml åŸæ–‡ä»¶ï¼ˆåœ°å€ä»¥ raw.githubusercontent.com å¼€å¤´ï¼‰æ¥è®¢é˜…, æ¯”å¦‚è¯´æˆ‘è¿™ä¸ªä»“åº“çš„ xml æ–‡ä»¶åœ°å€æ˜¯ [https://raw.githubusercontent.com/yinan-c/RSS-GPT/main/rss/brett-terpstra.xml](https://raw.githubusercontent.com/yinan-c/RSS-GPT/main/rss/brett-terpstra.xml)ã€‚

### 1.1 Forké¡¹ç›®

è¿›å…¥é¡¹ç›® [RSS-GPT](https://github.com/yinan-c/RSS-GPT), ç„¶å fork é¡¹ç›®åˆ°è‡ªå·±çš„ä»“åº“ã€‚

### 1.2 è®°å½•ä¸‰ä¸ªéœ€è¦çš„å‚æ•°

#### U_NAME

å°±æ˜¯ `git commit` ç”¨çš„ç”¨æˆ·å, ä¸€èˆ¬å¯ä»¥ç”¨ä½ çš„ GitHub ç”¨æˆ·å, ä½ çš„ GitHub ä¸»é¡µåœ°å€çš„æœ€åä¸€æ®µå°±æ˜¯ä½ çš„ç”¨æˆ·å, æ¯”å¦‚ https://github.com/yinan-c, ç”¨æˆ·åå°±æ˜¯ yinan-cã€‚

#### U_EMAIL 

å°±æ˜¯ `git commit` ç”¨çš„é‚®ç®±, æ˜¯ä½ æ³¨å†Œ GitHub æ—¶çš„é‚®ç®±, å¯ä»¥åœ¨ [GitHub è®¾ç½®é¡µé¢](https://github.com/settings/emails)

#### WORK_TOKEN

å› ä¸ºé¡¹ç›®æ¶‰åŠä½¿ç”¨è„šæœ¬æ“ä½œä»“åº“å†…å®¹,æ‰€ä»¥éœ€è¦ç»™è„šæœ¬ä¿®æ”¹ä»“åº“å†…æ–‡ä»¶çš„æƒé™,éœ€è¦ç”³è¯·ä¸€ä¸ª Repository Secret ä»¤ç‰Œã€‚

- ç‚¹å‡» GitHub ä¸»é¡µå³ä¸Šè§’è‡ªå·±çš„å¤´åƒ, ç‚¹ "Settings" è¿›å…¥è®¾ç½®é¡µé¢

- ç‚¹å‡»å·¦ä¾§èœå•æ ä¸€åˆ—æœ€ä¸‹æ–¹çš„ â€œ< > Developer settings" 

- ç‚¹å¼€å·¦ä¾§èœå•æ ä¸‹æ–¹çš„ â€œ ğŸ”‘ Personal access tokens", é€‰æ‹© â€Tokens (classic)â€œ, ç‚¹å¼€å·¦ä¸Šè§’çš„ "Generate new token", é€‰æ‹©ç¬¬äºŒé¡¹ "Generate new token (classic)" ç”Ÿæˆä¸€ä¸ªæ–°çš„ tokenã€‚

- é…ç½®æ–°å»ºçš„token

![](pics/token-set.png)

   - Note: RSS-GPT
   
   - Select scopes: å‹¾é€‰å‰ä¸¤æ  "repo" å’Œ "workflow" å†…çš„æ‰€æœ‰é€‰é¡¹
   
   - Expiration: é€‰ "No expiration" (æ— æœŸé™)
   
   - ç‚¹å‡»é¡µé¢æœ€ä¸‹æ–¹çš„ "Generate token"

![](pics/token-copy.png)

**ç‚¹å‡»å®Œåå¤åˆ¶token, æ³¨æ„ä¸€å®šè¦åœ¨æ­¤é¡µé¢å¤åˆ¶å¥½, ç¦»å¼€è¿™ä¸ªé¡µé¢ä½ å°±å†ä¹Ÿçœ‹ä¸åˆ°tokenäº†ã€‚é”™è¿‡å°±åªèƒ½æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤é‡æ–°ç”Ÿæˆä¸€ä¸ªäº†**

### 1.3 è®¾ç½® Repository Secrets

è¿›å…¥ä½  fork çš„ repository, ç‚¹å‡»ä¸Šæ–¹èœå•æ çš„ "Settings", ç„¶åç‚¹å¼€å·¦ä¾§èœå•æ çš„ "Secrets and variables", é€‰æ‹© "Actions", ç„¶åç‚¹å‡»å³ä¸Šè§’çš„ "New repository secret"ã€‚

![](pics/secrets.png)

- ç»™ç¿»è¯‘ä»“åº“æ·»åŠ  U_NAME, U_EMAIL, WORK_TOKEN ä¸‰ä¸ª secret, æ³¨æ„ä¸€æ¬¡åªèƒ½æ·»åŠ ä¸€ä¸ª, æ·»åŠ å®Œä¸€ä¸ªåå†æ·»åŠ ä¸‹ä¸€ä¸ªã€‚

  - Name: U_NAME, U_EMAIL, WORK_TOKEN
  
  - Value: åˆ†åˆ«ä¸º U_NAME ä¸Šé¢æ‰€è¯´çš„ä½ çš„ç”¨æˆ·å, U_EMAIL æ˜¯ä¸Šé¢æ‰€è¯´çš„ä½ çš„é‚®ç®±, WORK_TOKEN æ˜¯ä½ åˆšåˆšå¤åˆ¶çš„ token
  
  - ç‚¹å‡» â€œAdd secretâ€œ
  

### 1.4 ç»™éœ€è¦çš„æƒé™

å¼€å¯ GitHub Actions è®¿é—® Pages çš„æƒé™

![](pics/pages.png)

  - ç‚¹å‡» â€œSettingsâ€ 
  
  - åœ¨å·¦ä¾§ â€œCode and automationâ€ ä¸‹æ‰¾åˆ° â€œPagesâ€ ç‚¹å‡»è¿›å…¥
  
  - å°† â€œSource" è®¾ç½®æˆ "GitHub Actions", ç„¶åç‚¹å‡» â€œSaveâ€

## 2 è®¾ç½®éœ€è¦åˆå¹¶, è¿‡æ»¤, æ€»ç»“çš„ RSS æº

è¿›å…¥é¡¹ç›®, ç‚¹å‡»ä¸Šæ–¹èœå•æ çš„ "Code", ç‚¹å‡»è¿›å…¥ "config.ini" æ–‡ä»¶, ç‚¹å‡»å³ä¸Šè§’çš„é“…ç¬”å›¾æ ‡, ç¼–è¾‘ä»£ç , è®¾ç½®ä½ éœ€è¦çš„è®¢é˜…æº, å‰ä¸¤è¡Œçš„å†…å®¹ä¸è¦åŠ¨ã€‚

```
[cfg]
base = "rss/"
```

ç„¶ååœ¨æ¥ä¸‹æ¥çš„ä¸‰è¡Œæ›´æ”¹**ç›®æ ‡è¯­è¨€, å…³é”®è¯æ•°é‡, å’Œæ€»ç»“é•¿åº¦**ã€‚ä¹‹åçš„ä»£ç æ˜¯ feed-specific çš„é…ç½®, æ ¼å¼å¦‚ä¸‹, é¦–å…ˆæ˜¯3ä¸ªå¿…å¡«é¡¹ç›®:

- `[source001]`: è®¢é˜…åºå·, ä»001å¼€å§‹å¢é•¿, æ³¨æ„è¯·ç¡®ä¿ç¼–å·ä¸è¦é‡å¤, ä¸ç„¶ä»£ç ä¼šæŠ¥é”™

- `name = "brett-terpstra"`: ç”Ÿæˆè®¢é˜…æºçš„åç§°, åªå…è®¸åŒ…å«è‹±æ–‡å­—æ¯(a-z A-Z)ã€æ•°å­—(0-9)ã€(`-`,`_`,`.`,`~`) 4ä¸ªç‰¹æ®Šå­—ç¬¦

- `url = "https://brett.trpstra.net/brettterpstra"`: åŸå§‹RSSè®¢é˜…é“¾æ¥, å¯ä»¥åŒ…å«å¤šæ¡, ç”¨é€—å·åˆ†éš”

- `max = "10"`: ä¸¤æ¬¡åˆ·æ–°é—´éš”ä¹‹é—´éœ€è¦æ€»ç»“çš„æ–‡ç« æ•°é‡ã€‚æ¯”å¦‚ä½ è®¾ç½®ä¸º10, é‚£ä¹ˆæ¯æ¬¡åˆ·æ–°æ—¶, ä¼šæŠŠæœ€æ–°çš„10æ¡æ–‡ç« è¿›è¡Œæ€»ç»“ã€‚å¦‚æœè®¾ç½®ä¸º0, åˆ™ä¸ä¼šæ€»ç»“ä»»ä½•æ–‡ç« , è¿”å›åŸå§‹æ¡ç›®ã€‚

æ¥ä¸‹æ¥æ˜¯å…³äºè¿‡æ»¤çš„å¯é€‰é…ç½®: æ³¨æ„ä¸‰ä¸ªé…ç½®å¿…é¡»è¦åŒæ—¶è®¾ç½®æˆ–è€…åŒæ—¶ä¸è®¾ç½®, ä¸èƒ½åªè®¾ç½®å…¶ä¸­ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ª, å¦åˆ™ä¼šæŠ¥é”™ã€‚

- `filter_apply = "title"`: è¿‡æ»¤æ¡ä»¶éœ€è¦åº”ç”¨åœ¨ "title"ï¼ˆæ ‡é¢˜ï¼‰, "article" ï¼ˆæ­£æ–‡å†…å®¹ï¼‰or "link" ï¼ˆé“¾æ¥ï¼‰
- `filter_type = "exclude"`: è¿‡æ»¤ç±»å‹: â€includeâ€œï¼ˆåŒ…å«ï¼‰,  â€œexcludeâ€œï¼ˆä¸åŒ…å«ï¼‰, or â€regex matchâ€œï¼ˆæ­£åˆ™åŒ¹é…ï¼‰or â€regex not matchâ€œï¼ˆæ­£åˆ™ä¸åŒ¹é…ï¼‰

- `filter_rule = "TextExpander"`: è¿‡æ»¤å†…å®¹, å­—ç¬¦ä¸²æˆ–è€…æ­£åˆ™è¡¨è¾¾å¼

ç‚¹å‡»æœ€ä¸‹è¾¹çš„ â€œCommit changesâ€ æäº¤ä¿®æ”¹ã€‚

## 3 ä¿®æ”¹ README è¾“å‡º

- ç‚¹å‡» â€œCodeâ€ , ç‚¹å‡»è¿›å…¥ â€œmain.py" æ–‡ä»¶

- ç‚¹å‡»ç¬”å½¢å›¾æ ‡, ç¼–è¾‘ä»£ç , è¿›å…¥ç¬¬ 289 è¡Œ,  ä¿®æ”¹ "https://yinan-c.github.io/" è‡³ä½ çš„ GitHub Pages åœ°å€, ä¹Ÿå°±æ˜¯æŠŠ yinan-c æ”¹æˆä½ è‡ªå·±çš„ç”¨æˆ·åã€‚
   
- ï¼ˆå¯é€‰ï¼‰æ ¹æ®ä½ çš„éœ€æ±‚, å¯ä»¥åœ¨ 113 - 129 è¡Œä¿®æ”¹ promt, è®© GPT ç”Ÿæˆæ›´ç¬¦åˆä½ éœ€æ±‚çš„æ€»ç»“ã€‚

- ç‚¹å‡»æœ€ä¸‹è¾¹çš„ â€œCommit changesâ€ æäº¤ä¿®æ”¹ã€‚

## 4 æµ‹è¯• GitHub Actions

è¿›å…¥é¡¹ç›®, ç‚¹å‡»ä¸Šæ–¹èœå•æ çš„ "Actions", ç‚¹å‡» â€œcron_job", é€‰æ‹© â€œRun workflow"

ç­‰å¾…è¿è¡ŒæˆåŠŸä¼šæ˜¾ç¤ºç»¿è‰²çš„å‹¾, è¿è¡Œå¤±è´¥ä¼šæ˜¾ç¤ºçº¢è‰²çš„å‰ã€‚å¦‚æœå‡ºç°çº¢å‰, ä¸€èˆ¬éƒ½æ˜¯ä½ ä¿®æ”¹iniæ–‡ä»¶æ—¶, ä»€ä¹ˆåœ°æ–¹å†™é”™äº†, æˆ–è€…æƒé™ã€token è®¾ç½®é”™è¯¯ã€‚è¯·ä»”ç»†æ£€æŸ¥ã€‚

å¦‚æœå‰è¾¹æ²¡å‡ºç°é”™è¯¯ (ä¸»è¦æ˜¯actionsä¸Šæ²¡å‡ºç°çº¢å‰), é‚£ä¹ˆä½ å¯ä»¥åœ¨é¡¹ç›®çš„ä»‹ç»é¡µçœ‹åˆ°ä½ çš„è®¢é˜…æº

ç‚¹å‡»é‚£ä¸ª â€œæŸ¥çœ‹Rss-Translationâ€ é“¾æ¥,å°±å¯ä»¥è·³è½¬åˆ°è®¢é˜…åˆ—è¡¨é¡µ,æ¯æ¡é¡¹ç›®çš„ `->` å·¦ä¾§çš„æ˜¯åŸå§‹è®¢é˜…é“¾æ¥, å³ä¾§æ˜¯è½¬æ¢åçš„é“¾æ¥, è¿™ä¸ªé“¾æ¥å’Œå…¶ä»–çš„RSSè®¢é˜…é“¾æ¥ä¸€æ ·å¤„ç†å°±å¥½äº†ã€‚

**æ³¨æ„**

- é»˜è®¤è®¾ç½®æ˜¯æ¯2å°æ—¶è¿è¡Œä¸€æ¬¡è„šæœ¬, å¦‚æœéœ€è¦æ”¹çš„æ›´çŸ­è¯·ä¿®æ”¹ `.github/workflows/cron_job.yml` æ–‡ä»¶ç¬¬7è¡Œ,æ¯”å¦‚

```
   - cron: '0 */2 * * *' # run every 2 hours
   - cron: '0 */1 * * *' # run every 1 hours
```
- æˆ‘è®¾å®šçš„ prompt æ˜¯è®© AI å¸®åŠ©æå– å…³é”®è¯ + æ€»ç»“ å¹¶ä¸”è®© AI è‡ªåŠ¨æ’ç‰ˆ, æœ‰äº›æ—¶å€™ AI æ’ç‰ˆçš„æ•ˆæœå¹¶ä¸æ˜¯å¾ˆå¥½, ä½ ä¹Ÿå¯ä»¥è‡ªå·±éœ€è¦ä¿®æ”¹ `main.py` æ–‡ä»¶ç¬¬ 113 - 129 è¡Œçš„ promptã€‚

- å¦‚æœæœ‰ä»»ä½•é—®é¢˜, æ¬¢è¿ [email](mailto://yinan.email@gmail.com) äº¤æµã€‚
